(function(){"use strict";var e={4056:function(e,t,a){var l=a(9242),s=a(3396);function n(e,t,a,l,n,i){const o=(0,s.up)("v-list-item"),r=(0,s.up)("v-list"),u=(0,s.up)("app-menu"),d=(0,s.up)("v-navigation-drawer"),c=(0,s.up)("v-app-bar"),m=(0,s.up)("router-view"),p=(0,s.up)("v-main"),h=(0,s.up)("v-layout"),f=(0,s.up)("v-app");return(0,s.wg)(),(0,s.j4)(f,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,{class:"rounded rounded-md"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:l.navStartState,"onUpdate:modelValue":t[1]||(t[1]=e=>l.navStartState=e),permanent:l.navStartState,color:"primary",ref:"leftPanel"},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[(0,s.Wm)(o,{onClick:t[0]||(t[0]=e=>l.rail=!l.rail),"append-icon":l.rail?"mdi-chevron-right":"mdi-chevron-left"},null,8,["append-icon"])])),_:1}),(0,s.Wm)(u,{rail:l.rail},null,8,["rail"])])),_:1},8,["modelValue","permanent"]),l.header?((0,s.wg)(),(0,s.j4)(c,{key:0,title:l.header,onClick:t[2]||(t[2]=e=>l.navStartState=!0)},null,8,["title"])):(0,s.kq)("",!0),(0,s.Wm)(p,{class:"d-flex justify-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(m)])),_:1})])),_:1})])),_:1})}a(7658);function i(e,t,a,l,n,i){const o=(0,s.up)("v-tooltip"),r=(0,s.up)("v-list-item"),u=(0,s.up)("v-list");return(0,s.wg)(),(0,s.j4)(u,null,{default:(0,s.w5)((()=>[l.isAuthenticated?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Wm)(r,{title:`Вы вошли как: ${l.userName}`,"append-icon":a.rail?"mdi mdi-account":""},{default:(0,s.w5)((()=>[a.rail?((0,s.wg)(),(0,s.j4)(o,{key:0,text:`Вы вошли как: ${l.userName}`,activator:"parent"},null,8,["text"])):(0,s.kq)("",!0)])),_:1},8,["title","append-icon"]),(0,s.Wm)(r,{onClick:t[0]||(t[0]=e=>l.logOut()),"append-icon":a.rail?"mdi mdi-exit-to-app":""},{default:(0,s.w5)((()=>[(0,s.Uk)("Выйти "),a.rail?((0,s.wg)(),(0,s.j4)(o,{key:0,text:"Выйти",activator:"parent"})):(0,s.kq)("",!0)])),_:1},8,["append-icon"])],64)):((0,s.wg)(),(0,s.j4)(r,{key:1,onClick:t[1]||(t[1]=e=>l.logIn()),"append-icon":a.rail?"mdi mdi-location-enter":""},{default:(0,s.w5)((()=>[(0,s.Uk)("Вход "),a.rail?((0,s.wg)(),(0,s.j4)(o,{key:0,text:"Вход",activator:"parent"})):(0,s.kq)("",!0)])),_:1},8,["append-icon"])),(0,s.Wm)(r,{onClick:t[2]||(t[2]=e=>l.router.push("/")),"append-icon":a.rail?"mdi mdi-home-outline":""},{default:(0,s.w5)((()=>[(0,s.Uk)("Главная "),a.rail?((0,s.wg)(),(0,s.j4)(o,{key:0,text:"Главная",activator:"parent"})):(0,s.kq)("",!0)])),_:1},8,["append-icon"]),(0,s.Wm)(r,{onClick:t[3]||(t[3]=e=>l.router.push("/test")),"append-icon":a.rail?"mdi-network-strength-4-cog":""},{default:(0,s.w5)((()=>[(0,s.Uk)("Тест "),a.rail?((0,s.wg)(),(0,s.j4)(o,{key:0,text:"Тест",activator:"parent"})):(0,s.kq)("",!0)])),_:1},8,["append-icon"])])),_:1})}var o=a(65),r=a(2483),u=a(7139);function d(e,t,a,l,n,i){const o=(0,s.up)("v-btn"),r=(0,s.up)("v-slide-group-item"),d=(0,s.up)("v-slide-group"),c=(0,s.up)("complex-table"),m=(0,s.up)("btn-list"),p=(0,s.up)("app-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(c,{items:l.tableData.items,headers:l.tableData.headers,height:"83vh","is-loading":l.isLoading&&0===l.tableData.items.length,onRowClicked:t[1]||(t[1]=e=>l.openPopup(e)),"row-class-formatter":l.tableData.rowClassFormatter,"func-filter":l.tableData.funcFilter,showHeaders:!0,showSearchFields:!0},{tools:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:l.a,"onUpdate:modelValue":t[0]||(t[0]=e=>l.a=e),"center-active":!0},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.journalBtns,(e=>((0,s.wg)(),(0,s.j4)(r,{key:e.header},{default:(0,s.w5)((({toggle:t})=>[(0,s.Wm)(o,{class:"ma-2",active:l.tableData.listFilterStatus?.header===e.header||l.tableData.listFilterStatus===e.filter,onClick:a=>l.tableData.btnClick(e)&&t()},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e.header),1)])),_:2},1032,["active","onClick"])])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1},8,["items","headers","is-loading","row-class-formatter","func-filter"]),(0,s.Wm)(p,{modelValue:l.isPopupOpen,"onUpdate:modelValue":t[3]||(t[3]=e=>l.isPopupOpen=e),header:"Меню пользователя"},{content:(0,s.w5)((()=>[(0,s.Wm)(m,{list:l.popUpIcons,onButtonClick:t[2]||(t[2]=e=>e?.action())},null,8,["list"])])),_:1},8,["modelValue"])],64)}var c=a(4870);function m(e,t,a,l,n,i){const o=(0,s.up)("v-toolbar-title"),r=(0,s.up)("v-spacer"),d=(0,s.up)("v-icon"),c=(0,s.up)("v-btn"),m=(0,s.up)("v-toolbar-items"),p=(0,s.up)("v-toolbar"),h=(0,s.up)("v-card-text"),f=(0,s.up)("v-card-actions"),v=(0,s.up)("v-card"),g=(0,s.up)("v-dialog");return(0,s.wg)(),(0,s.j4)(g,{transition:"dialog-top-transition","model-value":a.modelValue,"onUpdate:modelValue":t[1]||(t[1]=e=>l.change(e)),fullscreen:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(v,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{color:"primary"},{default:(0,s.w5)((()=>[(0,s.Wm)(o,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(a.header),1)])),_:1}),(0,s.Wm)(r),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(c,{icon:"",onClick:t[0]||(t[0]=e=>l.change(!1))},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)("mdi-close")])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"content")])),_:3}),(0,s.Wm)(f,null,{default:(0,s.w5)((()=>[(0,s.WI)(e.$slots,"buttons")])),_:3})])),_:3})])),_:3},8,["model-value"])}var p={name:"app-popup",props:{header:{type:String,default:"Меню"},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const a=e=>{t("update:modelValue",e)};return{change:a}}},h=a(89);const f=(0,h.Z)(p,[["render",m]]);var v=f;const g={class:"modal-buttons"};function w(e,t,a,l,n,i){const o=(0,s.up)("v-icon"),r=(0,s.up)("v-btn");return(0,s.wg)(),(0,s.iD)("div",g,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.list,(t=>((0,s.wg)(),(0,s.j4)(r,{key:t.desc,onClick:a=>e.$emit("buttonClick",t),disabled:!t.action,size:"auto",class:"modal-buttons__button"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(o,{size:"50"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(t.icon),1)])),_:2},1024)])),default:(0,s.w5)((()=>[(0,s._)("span",null,(0,u.zw)(t.desc),1)])),_:2},1032,["onClick","disabled"])))),128))])}var y={name:"Btn-List",props:{list:{type:Array,default:()=>[]}},emits:["buttonClick"]};const _=(0,h.Z)(y,[["render",w],["__scopeId","data-v-d9c74ae2"]]);var b=_;const S={key:0},k={key:1,class:"table-header"},T=["onClick"],E={key:0,class:"d-flex flex-row justify-center"},D={key:1,class:"text-truncate",style:{"user-select":"none"}},U={class:"flex-grow-1"};function A(e,t,a,l,n,i){const o=(0,s.up)("v-text-field"),r=(0,s.up)("v-icon"),d=(0,s.up)("v-data-table");return(0,s.wg)(),(0,s.j4)(d,{"items-per-page":25,headers:a.headers,items:l.filteredItems,"hide-default-footer":"",dense:"",height:a.height,class:"elevation-1",loading:a.isLoading},{headers:(0,s.w5)((()=>[a.showHeaders?((0,s.wg)(),(0,s.iD)("tr",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.actveHeaders,(t=>((0,s.wg)(),(0,s.iD)("td",{class:(0,u.C_)(a.rowClassFormatter(t)+" text-center table-cell "+e.activeStyle),key:t.title},[(0,s._)("p",null,(0,u.zw)(t.title),1)],2)))),128))])):(0,s.kq)("",!0),a.showSearchFields?((0,s.wg)(),(0,s.iD)("tr",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.actveHeaders,(e=>((0,s.wg)(),(0,s.iD)("td",{key:e.title,class:"table-cell"},[(0,s.Wm)(o,{modelValue:l.filterArr[e.key],"onUpdate:modelValue":t=>l.filterArr[e.key]=t,type:"text",variant:"solo",label:e.title,disabled:a.isLoading||!e.title,clearable:!0},null,8,["modelValue","onUpdate:modelValue","label","disabled"])])))),128))])):(0,s.kq)("",!0)])),item:(0,s.w5)((({item:t})=>[(0,s._)("tr",{class:(0,u.C_)(["text-truncate",a.rowClassFormatter(t)]),onClick:a=>e.$emit("rowClicked",t)},[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.actveHeaders,(e=>((0,s.wg)(),(0,s.iD)("td",{class:"table-cell text-center",key:e.title},["object"===typeof t[e.key]?((0,s.wg)(),(0,s.iD)("div",E,["icons"===t[e.key]?.type&&t[e.key].icons.length>0?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(t[e.key].icons,(e=>((0,s.wg)(),(0,s.j4)(r,{key:e,size:"32"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e),1)])),_:2},1024)))),128)):((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s.Uk)(" — ")],64))])):((0,s.wg)(),(0,s.iD)("div",D,(0,u.zw)(`${t[e.key]??""}`),1))])))),128))],10,T)])),["footer.prepend"]:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s.WI)(e.$slots,"tools",{},void 0,!0)])])),_:2},1032,["headers","items","height","loading"])}var C={name:"complex-table",props:{headers:{type:Object},items:{type:Array},isLoading:{type:Boolean,default:!1},height:{type:String,default:"auto"},rowClassFormatter:{type:Function,default:()=>""},funcFilter:{type:Function,default:()=>()=>!0},showHeaders:{type:Boolean,default:!0},showSearchFields:{type:Boolean,default:!0}},emits:["rowClicked"],setup(e){const t=()=>e.headers.reduce(((e,t)=>(e[t.key]="",e)),{}),a=(0,c.iH)(t());(0,s.YP)(e.headers,(()=>{a.value=e.headers.reduce(t())}));const l=(0,s.Fl)((()=>{console.log("list recalculated");let t=[...e.items];return t=t.filter((t=>{if(e.funcFilter(t)){for(let l=0;l<e.headers.length;l++){const s=e.headers[l],n=t[s.key];if("object"===typeof n&&null!==n);else{const e=`${t[s.key]}`.toLowerCase().includes(null===a.value[s.key]?"":a.value[s.key].toLowerCase());if(!e)return!1}}return!0}return!1})),t}));return{filteredItems:l,actveHeaders:(0,s.Fl)((()=>e.headers.filter((e=>!e.hide)))),log:e=>console.log(e),filterArr:a}}};const I=(0,h.Z)(C,[["render",A],["__scopeId","data-v-a67068b2"]]);var R=I,x={name:"HomeView",components:{AppPopup:v,BtnList:b,ComplexTable:R},setup(){const e=(0,o.oR)(),t=(0,r.tv)(),a=(0,s.Fl)((()=>e.getters["usersList/list"])),l=function(e,t,a=!1){return{title:e,align:"center",sortable:!1,key:t,filter:"",hide:a}},n=(0,c.iH)({headers:[l("Имя","name"),l("Никнейм","username"),l("Емэйл","email"),l("Телефон","phone"),l("Сайт","website")],items:a,rowClassFormatter:e=>{if(e.title)switch(e.title){case"Адрес":return"wide";default:return""}else switch(e.status){case"Новая":return"new";case"Выполняется":return"executing";case"Назначена":return"assigned";case"Завершена бригадой":return"done";case"Закрыта в РВ":return"closed";default:return""}},listFilterStatus:null,btnClick:e=>{null===e.filter||n.value.listFilterStatus?.header===e.header?n.value.listFilterStatus=null:n.value.listFilterStatus=e},funcFilter:e=>null===n.value.listFilterStatus||("filterFunc"in n.value.listFilterStatus?n.value.listFilterStatus.filterFunc(e):e.status===n.value.listFilterStatus.filter)});e.dispatch("usersList/GET_LIST");const i=(0,c.iH)(null);let u=(0,c.iH)([{icon:"mdi-open-in-app",desc:"Открыть",action:()=>t.push(`/users/${i.value?.id}/`)}]);return{list:a,isLoading:(0,s.Fl)((()=>e.getters["usersList/isLoading"])),isPopupOpen:(0,c.iH)(!1),popUpIcons:u,openPopup:function(e){i.value=e,this.isPopupOpen=!0},tableData:n,a:(0,c.iH)(1)}}};const W=(0,h.Z)(x,[["render",d]]);var H=W;const V={key:0,class:"d-flex flex-column"},F=(0,s._)("p",{class:"ml-5 mr-5"},"Имя пользователя",-1),L=(0,s._)("p",{class:"ml-5 mr-5"},"Никнейм",-1),j=(0,s._)("p",{class:"ml-5 mr-5"},"Email",-1),O=(0,s._)("p",{class:"ml-5 mr-5"},"Адрес",-1),z=(0,s._)("p",{class:"ml-5 mr-5"},"Телефон",-1),$=(0,s._)("p",{class:"ml-5 mr-5"},"Вэбсайт",-1),P=(0,s._)("p",{class:"ml-5 mr-5"},"Компания",-1),N={class:"d-flex flex-row flex-wrap mt-5 mb-5 ml-5 mr-5"},Z={class:"ml-5 mr-5"},B=["src"],K={class:"d-flex flex-column justify-space-evenly ml-5 mr-5"},Y={class:"common_info d-flex flex-column justify-space-evenly mt-5 mb-5"},q={class:"d-flex flex-column mt-5 mb-5"},G={class:"d-flex flex-column justify-space-evenly ml-5 mr-5"},M=(0,s._)("b",null,"Post's title",-1),Q=(0,s._)("br",null,null,-1),J=(0,s._)("br",null,null,-1),X=(0,s._)("b",null,"Post's body",-1);function ee(e,t,a,l,n,i){const o=(0,s.up)("v-text-field"),r=(0,s.up)("v-card"),d=(0,s.up)("slide"),c=(0,s.up)("navigation"),m=(0,s.up)("pagination"),p=(0,s.up)("carousel"),h=(0,s.up)("router-view");return l.userCardInfo?.loaded?((0,s.wg)(),(0,s.j4)(r,{key:0,loading:l.isLoading,width:"95vw"},{default:(0,s.w5)((()=>[l.showCommon?((0,s.wg)(),(0,s.iD)("div",V,[(0,s.Wm)(r,{class:"common_info d-flex flex-column justify-space-around mt-5 mb-5",title:"Имя, Никнейм и т.д."},{default:(0,s.w5)((()=>[(0,s._)("div",null,[F,(0,s.Wm)(o,{class:"ml-5 mr-5",variant:"outlined",placeholder:"Имя пользователя",modelValue:l.userCardInfo.data.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.userCardInfo.data.name=e),disabled:!0},null,8,["modelValue"])]),(0,s._)("div",null,[L,(0,s.Wm)(o,{class:"input_text ml-5 mr-5",placeholder:"Никнейм",modelValue:l.userCardInfo.data.username,"onUpdate:modelValue":t[1]||(t[1]=e=>l.userCardInfo.data.username=e),variant:"outlined",disabled:!0},null,8,["modelValue"])]),(0,s._)("div",null,[j,(0,s.Wm)(o,{class:"ml-5 mr-5",variant:"outlined",placeholder:"Email",modelValue:l.userCardInfo.data.email,"onUpdate:modelValue":t[2]||(t[2]=e=>l.userCardInfo.data.email=e),disabled:!0},null,8,["modelValue"])]),(0,s._)("div",null,[O,(0,s.Wm)(o,{class:"input_text ml-5 mr-5",placeholder:"Адрес",modelValue:l.fullAddress,"onUpdate:modelValue":t[3]||(t[3]=e=>l.fullAddress=e),variant:"outlined",disabled:!0},null,8,["modelValue"])]),(0,s._)("div",null,[z,(0,s.Wm)(o,{class:"input_text ml-5 mr-5",placeholder:"Телефон",modelValue:l.userCardInfo.data.phone,"onUpdate:modelValue":t[4]||(t[4]=e=>l.userCardInfo.data.phone=e),variant:"outlined",disabled:!0},null,8,["modelValue"])]),(0,s._)("div",null,[$,(0,s.Wm)(o,{class:"input_text ml-5 mr-5",placeholder:"Вэбсайт",modelValue:l.userCardInfo.data.website,"onUpdate:modelValue":t[5]||(t[5]=e=>l.userCardInfo.data.website=e),variant:"outlined",disabled:!0},null,8,["modelValue"])]),(0,s._)("div",null,[P,(0,s.Wm)(o,{class:"input_text ml-5 mr-5",placeholder:"Компания",modelValue:l.companyName,"onUpdate:modelValue":t[6]||(t[6]=e=>l.companyName=e),variant:"outlined",disabled:!0},null,8,["modelValue"])])])),_:1}),(0,s.Wm)(r,{title:"Альбомы"},{default:(0,s.w5)((()=>[(0,s._)("div",N,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.albumsData.length,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"w-50",key:l.albumsData[e-1]?.userId},[(0,s.Wm)(p,{"items-to-show":1},{addons:(0,s.w5)((()=>[(0,s.Wm)(c),(0,s.Wm)(m)])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.albumsData[e-1].album?.length,(t=>((0,s.wg)(),(0,s.j4)(d,{class:"d-flex flex-column align-center",key:l.albumsData[e-1].album[t-1].id},{default:(0,s.w5)((()=>[(0,s.Uk)(" photo#"+(0,u.zw)(t)+" "+(0,u.zw)(l.albumsData[e-1].album?.length)+" ",1),(0,s._)("div",Z,[(0,s._)("img",{src:l.albumsData[e-1].album[t-1]?.url,alt:"",width:"100",height:"100"},null,8,B)])])),_:2},1024)))),128))])),_:2},1024)])))),128))])])),_:1}),(0,s.Wm)(r,{style:{visibility:"hidden"}},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{"items-to-show":1},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.photosData.length,(e=>((0,s.wg)(),(0,s.j4)(d,{key:l.photosData[e-1]?.userId},{default:(0,s.w5)((()=>[(0,s._)("div",K,(0,u.zw)(l.photosData[e-1]),1)])),_:2},1024)))),128)),(0,s._)("template",null,[(0,s.Wm)(c),(0,s.Wm)(m)])])),_:1})])),_:1}),(0,s.Wm)(r,{class:"d-flex flex-column w-100",title:"Посты"},{default:(0,s.w5)((()=>[(0,s._)("div",Y,[(0,s._)("div",q,[(0,s.Wm)(p,{ref:"postsData","items-to-show":1},{addons:(0,s.w5)((()=>[(0,s.Wm)(c),(0,s.Wm)(m)])),default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.postsData.length,(e=>((0,s.wg)(),(0,s.j4)(d,{key:l.postsData[e-1]?.userId},{default:(0,s.w5)((()=>[(0,s._)("div",G,[M,(0,s.Uk)(" "+(0,u.zw)(l.postsData[e-1]?.title)+" ",1),Q,J,X,(0,s.Uk)(" "+(0,u.zw)(l.postsData[e-1]?.body),1)])])),_:2},1024)))),128))])),_:1},512)])])])),_:1})])):(0,s.kq)("",!0),(0,s._)("div",null,[(0,s.Wm)(h,{property:l.userCardInfo+l.postsData},null,8,["property"])])])),_:1},8,["loading"])):(0,s.kq)("",!0)}var te=a(1658),ae={name:"users-view",components:{Carousel:te.lr,Slide:te.Mi,Pagination:te.tl,Navigation:te.W_},setup(){const e=(0,r.yj)(),t=(0,r.tv)(),a=(0,s.Fl)((()=>e.params.id)),l=(0,c.iH)(!0),n=(0,c.iH)(),i=(0,o.oR)(),u=(0,c.iH)(),d=(0,c.iH)(!1),m=(0,c.iH)({}),p=(0,c.iH)(""),h=(0,c.iH)("");let f=(0,s.Fl)((()=>(i.dispatch("users/GET_USER",a.value).then((()=>{_(),y()})),i.getters["users/getUserById"](a.value))));const v=(0,s.Fl)((()=>(i.dispatch("dictionaries/albums/GET_LIST",a.value).then((()=>{m.value=v.value.find((e=>e.id===f.value.data.id))})),i.getters["dictionaries/albums/list"]))),g=(0,s.Fl)((()=>(i.dispatch("dictionaries/photos/GET_LIST",a.value).then((()=>{v.value.forEach((e=>{e.album=[],g.value.forEach((t=>{if(e.id===t.albumId)while(e.album.length<5)console.log(e,e.album,t),e.album.push(t)}))}))})),i.getters["dictionaries/photos/list"]))),w=(0,s.Fl)((()=>(i.dispatch("dictionaries/posts/GET_LIST",a.value).then((()=>{u.value=w.value.find((e=>f.value.data.id===e.userId))})),console.log(w.value),i.getters["dictionaries/posts/list"])));function y(){return p.value=f.value.data?.address?.city?`${f.value.data?.address?.city},`:"г. N, ",p.value+=f.value.data?.address?.street?` ${f.value.data?.address?.street},`:"у. N, ",p.value+=f.value.data?.address?.suite?` ${f.value.data?.address?.suite},`:"д. N, ",p.value+=f.value.data?.address?.zipcode?` ${f.value.data?.address?.zipcode}`:"000-000-000",p}function _(){return h.value=f.value.data?.company?.name?`${f.value.data?.company?.name},`:"к. N, ",h.value+=f.value.data?.company?.catchPhrase?` ${f.value.data?.company?.catchPhrase},`:"бла-бла, ",h.value+=f.value.data?.company?.bs?` ${f.value.data?.company?.bs},`:"----, ",h}return{id:a,isLoading:!1,link:e=>{""!==e?(l.value=!1,t.push(e)):(l.value=!0,t.replace("./"))},tab:n,companyName:h,fullAddress:p,postsData:w,postsArray:u,postsLoaded:d,selectedAlbum:m,showCommon:l,userCardInfo:f,albumsData:v,photosData:g,log:()=>{console.log(w.value)}}}};const le=(0,h.Z)(ae,[["render",ee]]);var se=le;const ne="ПОЛИС ТЕСТ",ie=[{path:"/",name:"home",redirect:()=>({path:"/users-list"})},{path:"/users-list",name:"usersList",component:H,meta:{navStartState:!0,title:"Список пользователей"}},{path:"/users/:id/",name:"users",component:se,meta:{header:"Пользователь",navStartState:!1,title:"Пользователь"}}],oe=(0,r.p7)({history:(0,r.r5)(),routes:ie});oe.beforeEach((async e=>{const t=(0,o.oR)(),a=t.getters["auth/isAuthenticated"];return!("authorization"!==e.name&&!a)||{name:"authorization"}})),oe.afterEach((e=>{document.title=e.meta?.title?`${e.meta?.title} - ${ne}`:ne}));var re=oe,ue={name:"app-menu",props:{rail:{type:Boolean}},setup(){const e=(0,o.oR)(),t=()=>{re.push("/auth")},a=async()=>{await e.dispatch("auth/AUTH_LOGOUT"),t()};return{isAuthenticated:(0,s.Fl)((()=>e.getters["auth/isAuthenticated"])),userName:(0,s.Fl)((()=>e.getters["auth/username"])),logOut:a,logIn:t,router:re}}};const de=(0,h.Z)(ue,[["render",i]]);var ce=de,me={name:"app-main",components:{AppMenu:ce},setup(){let e=(0,c.iH)(!0),t=(0,c.iH)(!0);const a=(0,c.iH)(null),l=(0,c.iH)(""),n=(0,c.iH)(!1),i=e=>{l.value=e?.meta?.header??"",n.value=e?.meta?.hideLeftMenu??!1,t.value=void 0===e?.meta?.navStartState||!!e?.meta?.navStartState};return(0,s.YP)(re.currentRoute,(e=>i(e))),(0,s.Xn)((()=>i(re.currentRoute))),{navStartState:t,header:l,hideLeftMenu:n,rail:e,leftPanel:a}}};const pe=(0,h.Z)(me,[["render",n]]);var he=pe,fe=a(7327),ve=(a(2801),a(4161)),ge=a(4677);class we{constructor(e,t){(0,fe.Z)(this,"localStorageKey","sender-axios"),(0,fe.Z)(this,"authorization",void 0),(0,fe.Z)(this,"baseUrl",void 0),(0,fe.Z)(this,"notification",null),this.baseUrl=e;const a=localStorage.getItem(this.localStorageKey);a&&(this.authorization=a),t?.auth&&this.setAuth(t.auth);try{this.notification=(0,ge.pm)()}catch{console.log("-----NOTIFICATION SERVER ERROR-----")}}setAuth({username:e,password:t}){this.authorization=`Basic ${btoa(`${e}:${t}`)}`,localStorage.setItem(this.localStorageKey,this.authorization)}clearAuth(){this.authorization="",localStorage.removeItem(this.localStorageKey)}notifyError(e=""){this.notification?.error(e,{timeout:4e3})}error(e,t=null){let a;switch(delete e.stack,console.warn(`-----REQUEST REJECTED-----\n ${e?.config?.url?.split("/").at(-1)}`,e),e.code){case"ERR_NETWORK":a="Сервер недоступен!";break;case"ERR_BAD_REQUEST":switch(e.response.status){case 401:a="Ошибка авторизации!";break;default:a=`${e.response.status} Ошибка запроса!`}break;default:a="Неизвестная ошибка!"}this.notifyError(`${t??a}`)}send({endpoint:e,method:t,params:a,data:l}){return new Promise(((s,n)=>{let i={headers:{},params:a};this.authorization&&(i.headers["Authorization"]=this.authorization);let o,r,u=`${this.baseUrl}${e}`;switch(t.toLowerCase()){case"get":o=[u,i],r="get";break;case"post":o=[u,l,i],r="post";break;default:return void n(`undefined method ${t}`)}try{ve.Z[r](...o).then((e=>{console.log("-----REQUEST RECEIVED-----",e),s(e)})).catch((e=>{this.error(e),n(e)}))}catch(d){this.notifyError("Внутренняя ошибка"),console.warn("-----REQUEST ERROR-----",d),n(d)}}))}}const ye=new we("");async function _e(){try{const{data:e}=await ye.send({endpoint:"/ping",method:"get"});return"isAuthorized"in e&&!!e.isAuthorized}catch(e){return!1}}async function be(e,t){return ye.setAuth({username:e,password:t}),await _e()}function Se(){ye.clearAuth()}const ke={isAuthenticated:"auth/isAuthenticated",username:"auth/username"},Te={isAuthenticated:"true"===localStorage.getItem(ke.isAuthenticated),username:localStorage.getItem(ke.username),errorString:""},Ee={isAuthenticated:e=>e.isAuthenticated,errorString:e=>e.errorString,username:e=>e.username},De={AUTH_REQUEST:async({commit:e},{user:t,pass:a})=>{await be(t,a)?(e("SUCCESS_AUTH_USER",{user:t}),e("SET_AUTH_STATE",!0),e("CLEAR_ERROR")):(e("ERROR_AUTH_USER",{user:t}),e("SET_AUTH_STATE",!1),e("CLEAR_ERROR"))},AUTH_LOGOUT:({commit:e})=>{Se(),e("SET_AUTH_STATE",!1),e("CLEAR_USERNAME")}},Ue={SET_AUTH_STATE:(e,t)=>{e.isAuthenticated=t,localStorage.setItem(ke.isAuthenticated,t)},SUCCESS_AUTH_USER:(e,{user:t})=>{e.username=t??"Пользователь",localStorage.setItem(ke.username,e.username)},ERROR_AUTH_USER:e=>{e.errorString="errorString"},CLEAR_USERNAME:e=>{localStorage.removeItem(ke.username),e.username=""},CLEAR_ERROR:e=>e.errorString=""};var Ae={namespaced:!0,state:Te,getters:Ee,actions:De,mutations:Ue};const Ce=(e,t={})=>async()=>{try{const{data:a}=await ye.send({endpoint:e,method:"get",params:t});return a}catch(a){return!1}},Ie=Ce("https://jsonplaceholder.typicode.com/users/");function Re(e,t=(()=>{})){this.state={isLoading:!1,list:[],updatedTime:0,updateTimeDelay:1e4},this.getters={list:({list:e})=>e,info:({info:e})=>e,isLoading:({isLoading:e})=>e,updatedTime:({updatedTime:e})=>e,updateTimeDelay:({updateTimeDelay:e})=>e},this.mutations={SET_LIST:(e,t)=>e.list=t,IS_LOADING:(e,t)=>e.isLoading=!!t,setUpdatedTime:(e,t)=>e.updatedTime=t},this.actions={GET_LIST:async({commit:a,getters:l},s)=>{const n=(new Date).getTime();if(n-l.updatedTime>l.updateTimeDelay){a("IS_LOADING",!0);const l=await e();return a("IS_LOADING",!1),Array.isArray(l)?(t(l,s),a("SET_LIST",l),a("setUpdatedTime",(new Date).getTime()),l):(a("setUpdatedTime",0),null)}return l.list}}}function xe(e){return e.filter((e=>{e.address="(null)"===e.address?"—":e.address,e.hasAttachment=e.hasAttachment?"Есть":"",e.hasEquipment=e.hasEquipment?"Есть":"",e.icons={type:"icons",icons:[]},e.createdByBrigade&&e.icons.icons.push("mdi-account-hard-hat"),e.hasEquipment&&e.icons.icons.push("mdi-truck"),"Новая"===e.status&&null!==e.brigade&&e.icons.icons.push("mdi mdi-exclamation")}))}var We={namespaced:!0,...new Re(Ie,xe)};async function He(e){try{const{data:t}=await ye.send({endpoint:`https://jsonplaceholder.typicode.com/users/${e}`,method:"get"});return t}catch(t){return!1}}class Ve{get loaded(){return 0!==this.updatedTime}set loaded(e){this.updatedTime=e?1:0}constructor(e){(0,fe.Z)(this,"updatedTime",0),(0,fe.Z)(this,"updateTimeDelay",1e4),(0,fe.Z)(this,"data",{}),(0,fe.Z)(this,"isLoading",!1),(0,fe.Z)(this,"isExist",!0),(0,fe.Z)(this,"id",null),this.id=e}}const Fe={users:{}},Le={getUserById:({users:e})=>t=>e[t]},je={GET_USER:async({commit:e,getters:t},a)=>{let l=t.getUserById(a);void 0===l&&(e("CREATE_USER",a),l=t.getUserById(a));const s=(new Date).getTime();if(s-l.updatedTime>l.updateTimeDelay){l.isLoading=!0;const e=await He(a);if(l.isLoading=!1,!e||!("id"in e))return l.loaded=!1,l.isExist=!1,null;l.isExist=!0,l.data=e,l.updatedTime=(new Date).getTime()}return l}},Oe={CREATE_USER:(e,t)=>e.users[t]=new Ve(t)};var ze={namespaced:!0,state:Fe,getters:Le,actions:je,mutations:Oe};const $e=Ce("https://jsonplaceholder.typicode.com/albums");function Pe(e,t){const a=[Number(t)],l=e.filter((e=>a.includes(e.userId)));e.splice(0,e.length),e.push(...l)}var Ne={namespaced:!0,...new Re($e,Pe)};const Ze=Ce("https://jsonplaceholder.typicode.com/photos");function Be(e,t){console.log(e,t);const a=[Number(t)],l=e.filter((e=>a.includes(e.albumId)));console.log(e,t),e.push(...l)}var Ke={namespaced:!0,...new Re(Ze,Be)};const Ye=Ce("https://jsonplaceholder.typicode.com/posts");function qe(e,t){const a=[Number(t)],l=e.filter((e=>a.includes(e.userId)));e.splice(0,e.length),e.push(...l),console.log(e)}var Ge={namespaced:!0,...new Re(Ye,qe)};const Me={namespaced:!0,modules:{albums:Ne,photos:Ke,posts:Ge}};var Qe=(0,o.MT)({state:{},getters:{},mutations:{},actions:{},modules:{auth:Ae,usersList:We,users:ze,dictionaries:Me}}),Je=a(5470),Xe=a(9894),et=a(9501),tt=a(8604),at=(a(9773),a(8727)),lt=a(6312),st=a(8600),nt=(0,at.Rd)({icons:{defaultSet:"mdi"},theme:{options:{customProperties:!0},defaultTheme:"main",themes:{main:{dark:!1,colors:{primary:"#2c3a52",attention:"#d44b38",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#115bdc",success:"#4CAF50",warning:"#F06292"}}}},locale:{locale:"ru",fallback:"ru",messages:{ru:tt.Z}},components:{...lt,VDataTable:Je.y_,VDataTableServer:Xe.t,VDataTableVirtual:et.H},directives:st});a(343);const it={};(0,l.ri)(he).use(Qe).use(re).use(nt).use(ge.ZP,it).mount("#app")}},t={};function a(l){var s=t[l];if(void 0!==s)return s.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,l,s,n){if(!l){var i=1/0;for(d=0;d<e.length;d++){l=e[d][0],s=e[d][1],n=e[d][2];for(var o=!0,r=0;r<l.length;r++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](l[r])}))?l.splice(r--,1):(o=!1,n<i&&(i=n));if(o){e.splice(d--,1);var u=s();void 0!==u&&(t=u)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[l,s,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var s,n,i=l[0],o=l[1],r=l[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(r)var d=r(a)}for(t&&t(l);u<i.length;u++)n=i[u],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},l=self["webpackChunkbrigades_vue"]=self["webpackChunkbrigades_vue"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(4056)}));l=a.O(l)})();
//# sourceMappingURL=app.d542739d.js.map